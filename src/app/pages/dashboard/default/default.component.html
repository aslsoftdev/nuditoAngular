<!-- Shimmer loader -->
<div *ngIf="loading" class="row g-3">

  <!-- Resumen Total (Grande) -->
  <div class="col-12 mt-3">
    <div class="card shadow-sm border-0 p-5 rounded-3 text-center placeholder-wave">
      <div class="placeholder bg-secondary col-3 mb-3 rounded mx-auto"></div>
      <div class="placeholder bg-secondary col-6 rounded fw-bold mx-auto" style="height: 40px;"></div>
    </div>
  </div>

  <!-- KPIs Dinero -->
  <div class="col-xl-4 col-md-6" *ngFor="let i of [1,2,3]">
    <div class="card shadow-sm border-0 p-4 rounded-3 placeholder-wave">
      <div class="placeholder bg-secondary col-4 mb-3 rounded"></div>
      <div class="placeholder bg-secondary col-6 mb-2 rounded"></div>
      <div class="placeholder bg-secondary col-8 rounded fw-bold"></div>
    </div>
  </div>

  <!-- KPIs Visitas -->
  <div class="col-xl-3 col-md-6" *ngFor="let i of [1,2,3,4]">
    <div class="card shadow-sm border-0 p-4 rounded-3 placeholder-wave">
      <div class="placeholder bg-secondary col-4 mb-3 rounded"></div>
      <div class="placeholder bg-secondary col-6 mb-2 rounded"></div>
      <div class="placeholder bg-secondary col-8 rounded fw-bold"></div>
    </div>
  </div>

</div>


<!-- Resumen Total -->
<div class="row g-3 mt-3" *ngIf="kpis && !loading">
  <div class="col-12">
    <div class="card bg-dark text-white shadow-sm border-0 p-4 rounded-3 text-center">
      <h6 class="mb-1">Total del Día ({{ fecha }})</h6>
      <h2 class="fw-bold text-warning">
        {{
          (kpis.total_efectivo + kpis.total_transferencias + kpis.total_credito)
            | currency:'MXN':'symbol':'1.0-0'
        }}
      </h2>
    </div>
  </div>
</div>

<!-- KPIs Dinero -->
<div class="row g-3" *ngIf="kpis && !loading">
  <!-- Total Efectivo -->
  <div class="col-xl-4 col-md-6">
    <div class="card bg-light shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-cash fs-1 text-success mb-2"></i>
      <h6 class="mb-1">Efectivo</h6>
      <h4 class="fw-bold text-success">
        {{ kpis.total_efectivo | currency:'MXN':'symbol':'1.0-0' }}
      </h4>
    </div>
  </div>

  <!-- Total Transferencias -->
  <div class="col-xl-4 col-md-6">
    <div class="card bg-light shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-building-bank fs-1 text-primary mb-2"></i>
      <h6 class="mb-1">Transferencias</h6>
      <h4 class="fw-bold text-primary">
        {{ kpis.total_transferencias | currency:'MXN':'symbol':'1.0-0' }}
      </h4>
    </div>
  </div>

  <!-- Total Crédito -->
  <div class="col-xl-4 col-md-6">
    <div class="card bg-light shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-credit-card fs-1 text-danger mb-2"></i>
      <h6 class="mb-1">Crédito</h6>
      <h4 class="fw-bold text-danger">
        {{ kpis.total_credito | currency:'MXN':'symbol':'1.0-0' }}
      </h4>
    </div>
  </div>
</div>

<!-- KPIs Visitas -->
<div class="row g-3 mt-3" *ngIf="kpis && !loading">
  <!-- Clientes Planeados -->
  <div class="col-xl-3 col-md-6">
    <div class="card bg-primary text-white shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-users fs-1 mb-2"></i>
      <h6 class="mb-1">Planeados</h6>
      <h4 class="fw-bold">{{ kpis.clientes_planeados }}</h4>
    </div>
  </div>

  <!-- Clientes Visitados -->
  <div class="col-xl-3 col-md-6">
    <div class="card bg-success text-white shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-user-check fs-1 mb-2"></i>
      <h6 class="mb-1">Visitados</h6>
      <h4 class="fw-bold">{{ kpis.clientes_visitados }}</h4>
    </div>
  </div>

  <!-- Clientes Cerrados -->
  <div class="col-xl-3 col-md-6">
    <div class="card bg-danger text-white shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-door-exit fs-1 mb-2"></i>
      <h6 class="mb-1">Cerrados</h6>
      <h4 class="fw-bold">{{ kpis.clientes_cerrados }}</h4>
    </div>
  </div>

  <!-- Clientes Faltan -->
  <div class="col-xl-3 col-md-6">
    <div class="card bg-warning text-dark shadow-sm border-0 p-4 rounded-3">
      <i class="ti ti-user-x fs-1 mb-2"></i>
      <h6 class="mb-1">Faltan</h6>
      <h4 class="fw-bold">{{ kpis.clientes_faltan }}</h4>
    </div>
  </div>
</div>

